$(document).ready((function(){var e=[];$('[name="email"]').on("change",(function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(this).val())?($(this).parent(".ds_input").removeClass("ds_error"),$(this).parent(".ds_input").find(".red").remove(),e.push(!0)):($(this).parent(".ds_input").find(".red").remove(),$(this).parent(".ds_input").addClass("ds_error"),$(this).parent(".ds_input").append('<p class="T3 red">Ошибка. Проверьте правильность ввода данных.</p>'),e.push(!1))})),$('[name="agreement"]').on("change",(function(){$(this).is(":checked")?($(this).parent(".ds_checkbox_1x").parent().find(".red").remove(),e.push(!0)):($(this).parent(".ds_checkbox_1x").find(".red").remove(),$(this).parent(".ds_checkbox_1x").parent().append('<p class="T3 red">Ошибка. Проверьте правильность ввода данных.</p>'),e.push(!1))})),$("#main-subscription").submit((function(s){var t=0;$(this).find($('[name="agreement"]')).prop("checked")&&(t=1);$(this);if(e=[],$(this).find($("input:not([type=submit])")).change(),e.includes(!1)&&!t)return!1;var n=new FormData($(this)[0]);return n.append("action","subscribe"),n.append("subscription_agree",t),$.ajax({type:$(this).attr("method"),url:"/local/ajax/subscription.php",processData:!1,contentType:!1,dataType:"json",data:n,success:function(e){e.status&&(e.success>1&&$.cookie("subscription","true"),$.ajax({type:"POST",url:BX.message("TEMPLATE_PATH")+"/thanks.php",dataType:"html",data:e,success:function(e){$(".main-subscribe__thanks").append(e),$(".main-subscribe__form").remove()}}))}}),s.preventDefault(),!1}))}));